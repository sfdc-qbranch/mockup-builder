<!-- views/livechat.ejs -->


<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>MEME MOCKUP</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="js/saveImage.js"></script>
    <style>
        body {
            padding-top: 20px;
            padding-bottom: 20px;
        }

        .thumbnail {
            position: relative;
            z-index: 999;
            height: 400px;
            width: 300px;
            border: none;
        }

        .thumbnail img {
            height: 100%;
            width: 100%;
        }

        #headline {
            position: absolute;
            top: 2px;
            right: 2px;
            background-color: black;
            color: white;
            padding-left: 2px;
            padding-right: 2px;
        }

    </style>
</head>

<body>
    <div class="container">
        <%- include('partials/header') %>
            <div class="row">
                <div class="col-2">
                    <%- include('partials/navbar') %>
                </div>
                <!--LEFT COLUMN-->
                <div class="col-5">
                    <div class="container">
                        <!--Upload image-->
                        <div>
                            <label for="imageUpload">Choose file to upload</label>
                            <input type="file" id="imageUpload" name="imageUpload" accept=".jpg, .jpeg, .png" />

                        </div>

                        <!--Headline-->
                        <div>
                            <label for="headlineInput">Headline:</label>
                            <input type="text" id="headlineInput" placeholder="Please input..." />
                        </div>

                        <!--Save Button-->
                        <div>
                            <label for="previewButton">Preview generated Image</label><br>
                            <button id="previewButton">Preview</button>
                            <div id="previewImage">
                            </div>
                            <label for="saveButton">Save the preview image in your local space!
                            </label><br>
                            <button id="saveButton">Save</button>
                        </div>
                    </div>
                </div>
                <!--RIGHT COLUMN-->
                <div class="col-5">
                    <div id="capture">
                        <div id="thumbnail" class="thumbnail">
                            <img id="uploadedImage" />
                            <h1 id="headline" placeholder="Please input..."></h1>
                        </div>

                    </div>
                </div>
            </div>

            <%- include('partials/footer') %>
    </div>


    <script>
        
        var CAPTURE_WIDTH = '300';
        var CAPTURE_HEIGHT = '400';
        
        $(document).ready(function() {
            
        
            /*Upload Image*/
            $("#imageUpload").change(function() {
                let reader = new FileReader();

                reader.onload = function(e) {
                    // get loaded data and render thumbnail.
                    $("#uploadedImage").attr("src", e.target.result);
                };

                // read the image file as a data URL.
                reader.readAsDataURL(this.files[0]);
            });

            /*Input Headline*/
            $("#headlineInput").keypress(function() {
                $("#headline").html($("#headlineInput").val());
            });


            /*Preview Image*/
            $('#previewButton').click(function() {
                previewCaptured(CAPTURE_WIDTH,CAPTURE_HEIGHT);
            });

            /*Save Image*/
            $('#saveButton').click(function() {
                saveCaptured(CAPTURE_WIDTH,CAPTURE_HEIGHT);
            });


        }); //Document.Ready

    </script>
</body>

</html>
